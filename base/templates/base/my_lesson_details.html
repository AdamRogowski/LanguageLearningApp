{% extends "main.html" %}

{% block content %}

<h1 class="mt-6 mb-6"><a href="{% url 'my-lessons' my_lesson.user.id %}" class="text-3xl font-bold text-gray-800">My lessons</a></h1>
<h2 class="mb-2"><a href="{% url 'my-lesson-details' my_lesson.id %}" class="text-xl font-bold text-gray-800">{{ my_lesson.lesson.title }}</a></h2>

<h5 class="mt-2"><b>Lesson description:</b> {{ my_lesson.lesson.description }}</h5>
<h5><b>Acces type:</b> {{ my_lesson.lesson.access_type.name}}</h5>
<h5><b>Target progress:</b> {{ my_lesson.target_progress }}</h5>

<br>

<a href="{% url 'start-practice' my_lesson.id 'normal' %}" class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all"><button autofocus>Practice</button></a>
<a href="{% url 'start-practice' my_lesson.id 'reverse' %}" class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all mb-4"><button>Reverse Practice</button></a>
<a href="{% url 'reset-progress' my_lesson.id %}"><button class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all">Reset Progress</button></a>
<br>
<hr>
<form action="{% url 'delete-my-lesson' my_lesson.id %}" method="get" style="display:inline;">
    <button type="submit" class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all mt-6">Delete lesson</button>
</form>

<form action="{% url 'copy-lesson' my_lesson.id %}" method="get" style="display:inline;">
    <button type="submit" {% if is_private %}disabled{% endif %} class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all">Copy lesson</button>
</form>

<a href="{% url 'export-lesson-json' my_lesson.lesson.id %}">
    <button type="button" class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all mb-6">Export JSON</button>
</a>

{% if can_edit %}
<form action="{% url 'edit-lesson' my_lesson.id %}" method="get" style="display:inline;">
    <button type="submit" class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all">Edit lesson</button>
</form>
{% endif %}

<br>
<hr>
<br>

<form method="GET" action="{% url 'my-lesson-details' my_lesson.id %}">
    <input type="text" name="q" placeholder="Search word...">
    <button type="submit" class="inline-block px-2 py-1 border border-gray-400 rounded bg-[#ddc2b1] text-gray-700 hover:underline hover:bg-gray-300 text-sm transition-all">Search</button>
</form>

<div class="my-lesson-container">


    <table class="w-auto table-auto border-collapse text-left">
        <thead>
            <tr>
                <th class="px-3 py-2">Prompt <br>({{my_lesson.lesson.prompt_language}})</th>
                <th class="px-3 py-2">Translation <br> ({{my_lesson.lesson.translation_language}})</th>
                <th class="px-2 py-2 text-center">Progress</th>
                <th class="px-2 py-2 text-center">Details</th>
                <th class="px-2 py-2 text-center">Edit</th>
            </tr>
        </thead>
        <tbody>
            {% for my_word in my_words %}
            <tr>
                <td class="px-3 py-2">{{ my_word.word.prompt }}</td>
                <td class="px-3 py-2">{{ my_word.word.translation }}</td>
                <td class="px-2 py-2 text-center">{{ my_word.current_progress }}</td>
                <td class="px-2 py-2 text-center">
                    <a href="{% url 'my-word-details' my_word.id %}" class="underline">View</a>
                </td>
                <td class="px-2 py-2 text-center">
                    <form action="{% url 'edit-word' my_word.id %}" method="get">
                        <button type="submit" {% if not can_edit %}disabled{% endif %} class="underline">Edit</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>  

{% endblock content %}