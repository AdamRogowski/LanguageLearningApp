{% extends 'base/layouts/my_lessons_layout.html' %}

{% block tab_content %}

<h1>Delete Folder</h1>

<div class="delete-warning">
    <h2>‚ö†Ô∏è Warning</h2>
    <p>You are about to delete the folder <strong>"{{ directory.name }}"</strong>.</p>
    
    {% if has_contents %}
    <div class="contents-warning">
        <p><strong>This folder contains:</strong></p>
        <ul>
            {% if subdirectory_count > 0 %}
            <li>{{ subdirectory_count }} subfolder{{ subdirectory_count|pluralize }}</li>
            {% endif %}
            {% if lesson_count > 0 %}
            <li>{{ lesson_count }} lesson{{ lesson_count|pluralize }}</li>
            {% endif %}
        </ul>
    </div>
    {% endif %}
</div>

<form method="POST">
    {% csrf_token %}
    
    <div class="delete-options">
        {% if has_contents %}
        <p>Choose an action:</p>
        
        <div class="option">
            <button type="submit" name="action" value="delete_all" class="btn-danger">
                üóëÔ∏è Delete folder and all contents
            </button>
            <span class="option-description">Permanently removes this folder and everything inside it.</span>
        </div>
        
        <div class="option">
            <button type="submit" name="action" value="move_contents" class="btn-warning">
                üì¶ Move contents to parent folder, then delete
            </button>
            <span class="option-description">Moves all subfolders and lessons to the parent folder before deleting this folder.</span>
        </div>
        {% else %}
        <p>This folder is empty.</p>
        
        <div class="option">
            <button type="submit" name="action" value="delete_all" class="btn-danger">
                üóëÔ∏è Delete folder
            </button>
        </div>
        {% endif %}
        
        <div class="option">
            {% if directory.parent_directory %}
                <a href="{% url 'my-lessons-directory' directory.parent_directory.id %}">
                    <button type="button">Cancel</button>
                </a>
            {% else %}
                <a href="{% url 'my-lessons' %}">
                    <button type="button">Cancel</button>
                </a>
            {% endif %}
        </div>
    </div>
</form>

<style>
    .delete-warning {
        background-color: #fff3cd;
        border: 1px solid #ffc107;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
    }
    .delete-warning h2 {
        margin-top: 0;
        color: #856404;
    }
    .contents-warning {
        background-color: #f8f9fa;
        border-radius: 4px;
        padding: 10px 15px;
        margin-top: 15px;
    }
    .contents-warning ul {
        margin: 5px 0 0 0;
        padding-left: 20px;
    }
    .delete-options {
        margin-top: 20px;
    }
    .option {
        margin-bottom: 15px;
    }
    .option button {
        padding: 10px 20px;
        cursor: pointer;
        font-size: 1em;
        border: none;
        border-radius: 4px;
    }
    .option-description {
        display: block;
        margin-top: 5px;
        font-size: 0.9em;
        color: #666;
    }
    .btn-danger {
        background-color: #dc3545;
        color: white;
    }
    .btn-danger:hover {
        background-color: #c82333;
    }
    .btn-warning {
        background-color: #ffc107;
        color: #212529;
    }
    .btn-warning:hover {
        background-color: #e0a800;
    }
</style>

{% endblock tab_content %}
